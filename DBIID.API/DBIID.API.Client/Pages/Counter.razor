@attribute [Route(RoutePaths.Counter)]
@inject HttpClient Http
@inject JwtAuthenticationStateProvider AuthStateProvider

<h3>Login</h3>

<input @bind="email" placeholder="Email" />
<input @bind="password" type="password" placeholder="Password" />
<button @onclick="Login">Login</button>

@code {
    private string email = "";
    private string password = "";

    private async Task Login()
    {
        var response = await Http.PostAsJsonAsync("api/auth/login", new { Email = email, Password = password });
        if (response.IsSuccessStatusCode)
        {
            var json = await response.Content.ReadFromJsonAsync<Dictionary<string, string>>();
            string token = json["token"];
            await AuthStateProvider.SetToken(token);
        }
    }
}